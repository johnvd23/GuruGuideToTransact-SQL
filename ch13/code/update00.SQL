SET CURSOR_CLOSE_ON_COMMIT OFF
USE pubs
DECLARE C CURSOR DYNAMIC
FOR SELECT * FROM sales

OPEN c

FETCH c

BEGIN TRAN
UPDATE sales SET qty=5 WHERE CURRENT OF c 

FETCH RELATIVE 0 FROM c

ROLLBACK TRAN

CLOSE c
DEALLOCATE c
